{"version":3,"file":"TestCanvas-Cu_kwSKX.js","sources":["../../../node_modules/.pnpm/react@19.2.3/node_modules/react/cjs/react-jsx-runtime.production.js","../../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js","../../../src/constants/index.ts","../../../src/utils/ids.ts","../../../src/utils/elementDefaults.ts","../../../src/utils/viewport.ts","../../../src/utils/scene/elements.ts","../../../src/utils/scene/connections.ts","../../../src/hooks/useInfiniteCanvasApi.ts","../../../src/components/ErrorBoundary.tsx","../../../src/components/elements/ElementRenderer.tsx","../../../src/components/elements/ConnectionRenderer.tsx","../../../src/utils/math.ts","../../../src/hooks/useSvgCanvasInteractions.ts","../../../src/components/canvas/ConnectionPreview.tsx","../../../src/components/canvas/ResizeHandles.tsx","../../../src/components/canvas/SVGCanvas.tsx","../../../src/components/layers/GridLayer.tsx","../../../src/components/ui/Icons.tsx","../../../src/components/ui/Toolbar.tsx","../../../src/components/ui/PropertiesPanel.tsx","../../../src/components/ui/ZoomControls.tsx","../../../src/components/canvas/InfiniteCanvas.tsx","../../../e2e/fixtures/TestCanvas.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","\nimport { SceneState } from '../types';\n\nexport const INITIAL_STATE: SceneState = {\n  version: 1,\n  view: { x: 0, y: 0, zoom: 1 },\n  elements: {},\n  connections: [],\n};\n\nexport const GRID_SIZE = 20;\nexport const MIN_ZOOM = 0.1;\nexport const MAX_ZOOM = 5;\nexport const ZOOM_STEP = 1.05;\nexport const WHEEL_ZOOM_STEP = 0.001;\n\nexport const DEFAULT_ELEMENT_WIDTH = 150;\nexport const DEFAULT_ELEMENT_HEIGHT = 100;\nexport const DEFAULT_TEXT_WIDTH = 200;\nexport const DEFAULT_TEXT_HEIGHT = 40;\nexport const DEFAULT_CUSTOM_WIDTH = 180;\nexport const DEFAULT_CUSTOM_HEIGHT = 120;\nexport const MIN_ELEMENT_SIZE = 20;\nexport const MAX_ELEMENT_SIZE = 5000;\nexport const MAX_COORDINATE = 100000;\n\nexport const DEFAULTS = {\n  backgroundColor: '#ffffff',\n  strokeColor: '#000000',\n  strokeWidth: 2,\n  opacity: 1,\n  rotation: 0,\n  connectionWidth: 2,\n  connectionCurvature: 0.5,\n};\n","export type CreateIdOptions = {\n  prefix: string;\n  includeRandomSuffix?: boolean;\n};\n\nexport function createId({ prefix, includeRandomSuffix = false }: CreateIdOptions): string {\n  const ts = Date.now();\n  if (!includeRandomSuffix) return `${prefix}_${ts}`;\n  return `${prefix}_${ts}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nexport function createElementId(includeRandomSuffix = false): string {\n  return createId({ prefix: 'el', includeRandomSuffix });\n}\n\nexport function createConnectionId(includeRandomSuffix = false): string {\n  return createId({ prefix: 'conn', includeRandomSuffix });\n}\n","import { ElementType } from '../types';\nimport {\n  DEFAULT_CUSTOM_HEIGHT,\n  DEFAULT_CUSTOM_WIDTH,\n  DEFAULT_ELEMENT_HEIGHT,\n  DEFAULT_ELEMENT_WIDTH,\n  DEFAULT_TEXT_HEIGHT,\n  DEFAULT_TEXT_WIDTH,\n} from '../constants';\n\nexport function getDefaultElementSize(type: ElementType): { width: number; height: number } {\n  if (type === 'text') {\n    return { width: DEFAULT_TEXT_WIDTH, height: DEFAULT_TEXT_HEIGHT };\n  }\n\n  if (type === 'custom') {\n    return { width: DEFAULT_CUSTOM_WIDTH, height: DEFAULT_CUSTOM_HEIGHT };\n  }\n\n  return { width: DEFAULT_ELEMENT_WIDTH, height: DEFAULT_ELEMENT_HEIGHT };\n}\n","import { ViewState } from '../types';\n\nexport type RectLike = {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  right: number;\n  bottom: number;\n};\n\nexport function screenToWorldPoint(\n  clientX: number,\n  clientY: number,\n  rect: RectLike,\n  view: ViewState\n): { x: number; y: number } {\n  return {\n    x: (clientX - rect.left - view.x) / view.zoom,\n    y: (clientY - rect.top - view.y) / view.zoom,\n  };\n}\n\nexport function worldToScreenPoint(\n  worldX: number,\n  worldY: number,\n  rect: RectLike,\n  view: ViewState\n): { x: number; y: number } {\n  return {\n    x: worldX * view.zoom + view.x + rect.left,\n    y: worldY * view.zoom + view.y + rect.top,\n  };\n}\n\nexport function clampZoom(level: number, min: number, max: number): number {\n  return Math.min(max, Math.max(min, level));\n}\n","import type { CanvasElement } from '../../types';\n\nexport function deleteElementsFromMap(\n  elements: Record<string, CanvasElement>,\n  ids: string[]\n): Record<string, CanvasElement> {\n  if (ids.length === 0) return elements;\n\n  const next = { ...elements };\n  for (const id of ids) {\n    delete next[id];\n  }\n  return next;\n}\n\nexport function updateElementsInMap(\n  elements: Record<string, CanvasElement>,\n  updates: Array<{ id: string } & Partial<CanvasElement>>\n): { elements: Record<string, CanvasElement>; updated: CanvasElement[] } {\n  if (updates.length === 0) return { elements, updated: [] };\n\n  const next = { ...elements };\n  const updated: CanvasElement[] = [];\n\n  for (const update of updates) {\n    const { id, ...changes } = update;\n    const existing = next[id];\n    if (!existing) continue;\n    const merged = { ...existing, ...changes };\n    next[id] = merged;\n    updated.push(merged);\n  }\n\n  return { elements: next, updated };\n}\n","import type { Connection } from '../../types';\n\nexport function deleteConnectionsForElements(connections: Connection[], elementIds: string[]): Connection[] {\n  if (elementIds.length === 0) return connections;\n  const idSet = new Set(elementIds);\n  return connections.filter((c) => !idSet.has(c.sourceId) && !idSet.has(c.targetId));\n}\n","import { useMemo } from 'react';\nimport type { MutableRefObject, RefObject } from 'react';\nimport type {\n  CanvasElement,\n  Connection,\n  CreateConnectionOptions,\n  CreateElementOptions,\n  InfiniteCanvasRef,\n  SceneState,\n} from '../types';\nimport { DEFAULTS, MAX_ZOOM, MIN_ZOOM, ZOOM_STEP, MAX_COORDINATE, MAX_ELEMENT_SIZE, MIN_ELEMENT_SIZE } from '../constants';\nimport { createConnectionId, createElementId } from '../utils/ids';\nimport { getDefaultElementSize } from '../utils/elementDefaults';\nimport { clampZoom, screenToWorldPoint, worldToScreenPoint } from '../utils/viewport';\nimport { deleteConnectionsForElements, deleteElementsFromMap, updateElementsInMap } from '../utils/scene';\n\nconst clampCoordinate = (val: number) => Math.min(Math.max(-MAX_COORDINATE, val), MAX_COORDINATE);\nconst clampDimension = (val: number) => Math.min(Math.max(MIN_ELEMENT_SIZE, val), MAX_ELEMENT_SIZE);\n\nexport type UseInfiniteCanvasApiArgs = {\n  sceneRef: MutableRefObject<SceneState>;\n  selectedIdsRef: MutableRefObject<string[]>;\n  containerRef: RefObject<HTMLDivElement>;\n  updateScene: (updater: (prev: SceneState) => SceneState) => SceneState;\n  handleSelection: (ids: string[]) => void;\n};\n\nexport function useInfiniteCanvasApi({\n  sceneRef,\n  selectedIdsRef,\n  containerRef,\n  updateScene,\n  handleSelection,\n}: UseInfiniteCanvasApiArgs): InfiniteCanvasRef {\n  return useMemo(() => {\n    const screenToWorld = (screenX: number, screenY: number) => {\n      const rect = containerRef.current?.getBoundingClientRect();\n      if (!rect) return { x: 0, y: 0 };\n      return screenToWorldPoint(screenX, screenY, rect, sceneRef.current.view);\n    };\n\n    const worldToScreen = (worldX: number, worldY: number) => {\n      const rect = containerRef.current?.getBoundingClientRect();\n      if (!rect) return { x: 0, y: 0 };\n      return worldToScreenPoint(worldX, worldY, rect, sceneRef.current.view);\n    };\n\n    return {\n      exportJson: () => sceneRef.current,\n      importJson: (data: SceneState) => updateScene(() => data),\n\n      zoomIn: (amount = ZOOM_STEP) =>\n        updateScene((s) => ({\n          ...s,\n          view: { ...s.view, zoom: clampZoom(s.view.zoom * amount, MIN_ZOOM, MAX_ZOOM) },\n        })),\n\n      zoomOut: (amount = ZOOM_STEP) =>\n        updateScene((s) => ({\n          ...s,\n          view: { ...s.view, zoom: clampZoom(s.view.zoom / amount, MIN_ZOOM, MAX_ZOOM) },\n        })),\n\n      fitView: () => {\n        updateScene((s) => ({ ...s, view: { x: 0, y: 0, zoom: 1 } }));\n      },\n\n      selectElements: (ids: string[]) => handleSelection(ids),\n\n      createElement: (options: CreateElementOptions) => {\n        const defaults = getDefaultElementSize(options.type);\n\n        const center = (() => {\n          const rect = containerRef.current?.getBoundingClientRect();\n          if (!rect) return { x: 0, y: 0 };\n          return screenToWorld(rect.left + rect.width / 2, rect.top + rect.height / 2);\n        })();\n\n        const newElement: CanvasElement = {\n          id: options.id || createElementId(true),\n          type: options.type,\n          x: clampCoordinate(options.x ?? center.x - (options.width ?? defaults.width) / 2),\n          y: clampCoordinate(options.y ?? center.y - (options.height ?? defaults.height) / 2),\n          width: clampDimension(options.width ?? defaults.width),\n          height: clampDimension(options.height ?? defaults.height),\n          rotation: options.rotation ?? DEFAULTS.rotation,\n          opacity: options.opacity ?? DEFAULTS.opacity,\n          backgroundColor: options.backgroundColor ?? DEFAULTS.backgroundColor,\n          strokeColor: options.strokeColor ?? DEFAULTS.strokeColor,\n          strokeWidth: options.strokeWidth ?? DEFAULTS.strokeWidth,\n          text: options.text,\n          componentType: options.componentType,\n          props: options.props,\n          locked: options.locked ?? false,\n        };\n\n        updateScene((prev) => ({\n          ...prev,\n          elements: { ...prev.elements, [newElement.id]: newElement },\n        }));\n\n        return newElement;\n      },\n\n      createElements: (optionsList: CreateElementOptions[]) => {\n        const rect = containerRef.current?.getBoundingClientRect();\n        const center = rect\n          ? screenToWorld(rect.left + rect.width / 2, rect.top + rect.height / 2)\n          : { x: 0, y: 0 };\n\n        const newElements: CanvasElement[] = optionsList.map((options) => {\n          const defaults = getDefaultElementSize(options.type);\n          return {\n            id: options.id || createElementId(true),\n            type: options.type,\n            x: clampCoordinate(options.x ?? center.x - (options.width ?? defaults.width) / 2),\n            y: clampCoordinate(options.y ?? center.y - (options.height ?? defaults.height) / 2),\n            width: clampDimension(options.width ?? defaults.width),\n            height: clampDimension(options.height ?? defaults.height),\n            rotation: options.rotation ?? DEFAULTS.rotation,\n            opacity: options.opacity ?? DEFAULTS.opacity,\n            backgroundColor: options.backgroundColor ?? DEFAULTS.backgroundColor,\n            strokeColor: options.strokeColor ?? DEFAULTS.strokeColor,\n            strokeWidth: options.strokeWidth ?? DEFAULTS.strokeWidth,\n            text: options.text,\n            componentType: options.componentType,\n            props: options.props,\n            locked: options.locked ?? false,\n          };\n        });\n\n        updateScene((prev) => {\n          const nextElements = { ...prev.elements };\n          newElements.forEach((el) => {\n            nextElements[el.id] = el;\n          });\n          return { ...prev, elements: nextElements };\n        });\n\n        return newElements;\n      },\n\n      updateElement: (id: string, updates: Partial<CanvasElement>) => {\n        let updatedElement: CanvasElement | undefined;\n\n        updateScene((prev) => {\n          const element = prev.elements[id];\n          if (!element) {\n            if (process.env.NODE_ENV === 'development') {\n              console.warn(`[LumenBoard] updateElement: Element with id '${id}' not found`);\n            }\n            return prev;\n          }\n          \n          // Basic validation/clamping\n          const newWidth = updates.width !== undefined ? clampDimension(updates.width) : element.width;\n          const newHeight = updates.height !== undefined ? clampDimension(updates.height) : element.height;\n          const newX = updates.x !== undefined ? clampCoordinate(updates.x) : element.x;\n          const newY = updates.y !== undefined ? clampCoordinate(updates.y) : element.y;\n          \n          updatedElement = { ...element, ...updates, x: newX, y: newY, width: newWidth, height: newHeight };\n          return {\n            ...prev,\n            elements: { ...prev.elements, [id]: updatedElement },\n          };\n        });\n\n        return updatedElement || sceneRef.current.elements[id];\n      },\n\n      updateElements: (updates: Array<{ id: string } & Partial<CanvasElement>>) => {\n        let updatedElements: CanvasElement[] = [];\n\n        updateScene((prev) => {\n          const result = updateElementsInMap(prev.elements, updates);\n          updatedElements = result.updated;\n          return { ...prev, elements: result.elements };\n        });\n\n        return updatedElements;\n      },\n\n      deleteElement: (id: string) => {\n        if (!sceneRef.current.elements[id]) {\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(`[LumenBoard] deleteElement: Element with id '${id}' not found`);\n          }\n          return false;\n        }\n\n        updateScene((prev) => {\n          const nextElements = deleteElementsFromMap(prev.elements, [id]);\n          const nextConnections = deleteConnectionsForElements(prev.connections, [id]);\n          return { ...prev, elements: nextElements, connections: nextConnections };\n        });\n\n        if (selectedIdsRef.current.includes(id)) {\n          handleSelection(selectedIdsRef.current.filter((sid) => sid !== id));\n        }\n        \n        return true;\n      },\n\n      deleteElements: (ids: string[]) => {\n        const existingIds = ids.filter(id => Boolean(sceneRef.current.elements[id]));\n        if (existingIds.length === 0) return false;\n\n        updateScene((prev) => {\n          const nextElements = deleteElementsFromMap(prev.elements, existingIds);\n          const nextConnections = deleteConnectionsForElements(prev.connections, existingIds);\n          return { ...prev, elements: nextElements, connections: nextConnections };\n        });\n        handleSelection(selectedIdsRef.current.filter((sid) => !existingIds.includes(sid)));\n        \n        return true;\n      },\n\n      getElement: (id: string) => sceneRef.current.elements[id],\n\n      getElements: (ids?: string[]) => {\n        if (!ids) return Object.values(sceneRef.current.elements);\n        return ids.map((id) => sceneRef.current.elements[id]).filter(Boolean);\n      },\n\n      createConnection: (options: CreateConnectionOptions) => {\n        const newConnection: Connection = {\n          id: options.id || createConnectionId(true),\n          sourceId: options.sourceId,\n          targetId: options.targetId,\n          sourceHandle: options.sourceHandle === 'auto' ? undefined : options.sourceHandle,\n          targetHandle: options.targetHandle === 'auto' ? undefined : options.targetHandle,\n          style: {\n            strokeColor: options.style?.strokeColor ?? DEFAULTS.strokeColor,\n            width: options.style?.width ?? DEFAULTS.connectionWidth,\n            curvature: options.style?.curvature ?? DEFAULTS.connectionCurvature,\n          },\n        };\n\n        updateScene((prev) => ({\n          ...prev,\n          connections: [...prev.connections, newConnection],\n        }));\n\n        return newConnection;\n      },\n\n      createConnections: (optionsList: CreateConnectionOptions[]) => {\n        const newConnections: Connection[] = optionsList.map((options) => ({\n          id: options.id || createConnectionId(true),\n          sourceId: options.sourceId,\n          targetId: options.targetId,\n          sourceHandle: options.sourceHandle === 'auto' ? undefined : options.sourceHandle,\n          targetHandle: options.targetHandle === 'auto' ? undefined : options.targetHandle,\n          style: {\n            strokeColor: options.style?.strokeColor ?? DEFAULTS.strokeColor,\n            width: options.style?.width ?? DEFAULTS.connectionWidth,\n            curvature: options.style?.curvature ?? DEFAULTS.connectionCurvature,\n          },\n        }));\n\n        updateScene((prev) => ({\n          ...prev,\n          connections: [...prev.connections, ...newConnections],\n        }));\n\n        return newConnections;\n      },\n\n      updateConnection: (id: string, updates: Partial<Connection>) => {\n        let updatedConnection: Connection | undefined;\n\n        updateScene((prev) => {\n          const idx = prev.connections.findIndex((c) => c.id === id);\n          if (idx === -1) {\n            if (process.env.NODE_ENV === 'development') {\n              console.warn(`[LumenBoard] updateConnection: Connection with id '${id}' not found`);\n            }\n            return prev;\n          }\n\n          updatedConnection = { ...prev.connections[idx], ...updates };\n          const newConnections = [...prev.connections];\n          newConnections[idx] = updatedConnection;\n\n          return { ...prev, connections: newConnections };\n        });\n\n        return updatedConnection || sceneRef.current.connections.find((c) => c.id === id);\n      },\n\n      deleteConnection: (id: string) => {\n        const exists = sceneRef.current.connections.some(c => c.id === id);\n        if (!exists) {\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(`[LumenBoard] deleteConnection: Connection with id '${id}' not found`);\n          }\n          return false;\n        }\n\n        updateScene((prev) => ({\n          ...prev,\n          connections: prev.connections.filter((c) => c.id !== id),\n        }));\n        return true;\n      },\n\n      deleteConnections: (ids: string[]) => {\n        const existingIds = ids.filter(id => sceneRef.current.connections.some(c => c.id === id));\n        if (existingIds.length === 0) return false;\n\n        updateScene((prev) => ({\n          ...prev,\n          connections: prev.connections.filter((c) => !existingIds.includes(c.id)),\n        }));\n        return true;\n      },\n\n      getConnection: (id: string) => sceneRef.current.connections.find((c) => c.id === id),\n\n      getConnections: (elementId?: string) => {\n        if (!elementId) return sceneRef.current.connections;\n        return sceneRef.current.connections.filter((c) => c.sourceId === elementId || c.targetId === elementId);\n      },\n\n      getConnectionsBetween: (sourceId: string, targetId: string) => {\n        return sceneRef.current.connections.filter((c) => c.sourceId === sourceId && c.targetId === targetId);\n      },\n\n      getViewportCenter: () => {\n        const rect = containerRef.current?.getBoundingClientRect();\n        if (!rect) return { x: 0, y: 0 };\n        return screenToWorld(rect.left + rect.width / 2, rect.top + rect.height / 2);\n      },\n\n      getViewportBounds: () => {\n        const rect = containerRef.current?.getBoundingClientRect();\n        if (!rect) return { x: 0, y: 0, width: 0, height: 0 };\n        const tl = screenToWorld(rect.left, rect.top);\n        const br = screenToWorld(rect.right, rect.bottom);\n        return {\n          x: tl.x,\n          y: tl.y,\n          width: br.x - tl.x,\n          height: br.y - tl.y,\n        };\n      },\n\n      screenToWorld,\n      worldToScreen,\n\n      panTo: (x: number, y: number) => {\n        const rect = containerRef.current?.getBoundingClientRect();\n        if (!rect) return;\n\n        const centerX = rect.width / 2;\n        const centerY = rect.height / 2;\n\n        updateScene((s) => ({\n          ...s,\n          view: {\n            ...s.view,\n            x: centerX - x * s.view.zoom,\n            y: centerY - y * s.view.zoom,\n          },\n        }));\n      },\n\n      panToElement: (id: string) => {\n        const el = sceneRef.current.elements[id];\n        if (!el) {\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(`[LumenBoard] panToElement: Element with id '${id}' not found`);\n          }\n          return false;\n        }\n\n        const centerX = el.x + el.width / 2;\n        const centerY = el.y + el.height / 2;\n\n        const rect = containerRef.current?.getBoundingClientRect();\n        if (!rect) return false;\n\n        const viewCX = rect.width / 2;\n        const viewCY = rect.height / 2;\n\n        updateScene((s) => ({\n          ...s,\n          view: {\n            ...s.view,\n            x: viewCX - centerX * s.view.zoom,\n            y: viewCY - centerY * s.view.zoom,\n          },\n        }));\n        return true;\n      },\n\n      setZoom: (level: number, focalPoint?: { x: number; y: number }) => {\n        updateScene((s) => {\n          const newZoom = clampZoom(level, MIN_ZOOM, MAX_ZOOM);\n\n          if (!focalPoint) {\n            const rect = containerRef.current?.getBoundingClientRect();\n            if (!rect) return { ...s, view: { ...s.view, zoom: newZoom } };\n\n            const viewCX = rect.width / 2;\n            const viewCY = rect.height / 2;\n            const worldCX = (viewCX - s.view.x) / s.view.zoom;\n            const worldCY = (viewCY - s.view.y) / s.view.zoom;\n\n            const newViewX = viewCX - worldCX * newZoom;\n            const newViewY = viewCY - worldCY * newZoom;\n\n            return { ...s, view: { x: newViewX, y: newViewY, zoom: newZoom } };\n          }\n\n          return { ...s, view: { ...s.view, zoom: newZoom } };\n        });\n      },\n\n      selectAll: () => handleSelection(Object.keys(sceneRef.current.elements)),\n\n      clearSelection: () => handleSelection([]),\n\n      getSelectedIds: () => selectedIdsRef.current,\n\n      focusElement: (id: string, options = {}) => {\n        const el = sceneRef.current.elements[id];\n        if (!el) {\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(`[LumenBoard] focusElement: Element with id '${id}' not found`);\n          }\n          return false;\n        }\n\n        handleSelection([id]);\n\n        const rect = containerRef.current?.getBoundingClientRect();\n        if (!rect) return false;\n\n        updateScene((s) => {\n          const zoom = (options as { zoom?: number }).zoom ?? s.view.zoom;\n          const centerX = el.x + el.width / 2;\n          const centerY = el.y + el.height / 2;\n\n          return {\n            ...s,\n            view: {\n              x: rect.width / 2 - centerX * zoom,\n              y: rect.height / 2 - centerY * zoom,\n              zoom,\n            },\n          };\n        });\n        return true;\n      },\n\n      focusElements: (ids: string[], options = {}) => {\n        if (ids.length === 0) return false;\n\n        handleSelection(ids);\n\n        let minX = Infinity,\n          minY = Infinity,\n          maxX = -Infinity,\n          maxY = -Infinity;\n        let found = false;\n\n        ids.forEach((id) => {\n          const el = sceneRef.current.elements[id];\n          if (el) {\n            found = true;\n            minX = Math.min(minX, el.x);\n            minY = Math.min(minY, el.y);\n            maxX = Math.max(maxX, el.x + el.width);\n            maxY = Math.max(maxY, el.y + el.height);\n          }\n        });\n\n        if (!found) {\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(`[LumenBoard] focusElements: No elements found for ids: ${ids.join(', ')}`);\n          }\n          return false;\n        }\n\n        const rect = containerRef.current?.getBoundingClientRect();\n        if (!rect) return false;\n\n        const padding = (options as { padding?: number }).padding ?? 50;\n        const contentW = maxX - minX + padding * 2;\n        const contentH = maxY - minY + padding * 2;\n\n        const zoomW = rect.width / contentW;\n        const zoomH = rect.height / contentH;\n        const zoom = Math.min(Math.min(zoomW, zoomH), MAX_ZOOM);\n\n        const centerX = minX + (maxX - minX) / 2;\n        const centerY = minY + (maxY - minY) / 2;\n\n        updateScene((s) => ({\n          ...s,\n          view: {\n            x: rect.width / 2 - centerX * zoom,\n            y: rect.height / 2 - centerY * zoom,\n            zoom,\n          },\n        }));\n        return true;\n      },\n    };\n  }, [containerRef, handleSelection, sceneRef, selectedIdsRef, updateScene]);\n}\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\n\ninterface ErrorBoundaryProps {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n}\n\n/**\n * Error boundary for catching errors in custom components.\n * Prevents errors in user-provided components from crashing the entire canvas.\n * @internal\n */\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    this.props.onError?.(error, errorInfo);\n    \n    if (process.env.NODE_ENV === 'development') {\n      console.error('[LumenBoard] Error in custom component:', error, errorInfo);\n    }\n  }\n\n  render(): ReactNode {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n      \n      return (\n        <g className=\"lb-error-boundary\">\n          <rect\n            width=\"100%\"\n            height=\"100%\"\n            fill=\"#fee2e2\"\n            stroke=\"#ef4444\"\n            strokeWidth={1}\n            rx={4}\n          />\n          <text\n            x=\"50%\"\n            y=\"50%\"\n            textAnchor=\"middle\"\n            dominantBaseline=\"middle\"\n            fill=\"#dc2626\"\n            fontSize={12}\n          >\n            Component Error\n          </text>\n        </g>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","\nimport React from 'react';\nimport { CanvasElement } from '../../types';\nimport { ErrorBoundary } from '../ErrorBoundary';\n\ninterface ElementRendererProps {\n  element: CanvasElement;\n  isSelected: boolean;\n  customComponent?: React.FC<any>;\n  cursor?: React.CSSProperties['cursor'];\n}\n\nconst ElementRenderer: React.FC<ElementRendererProps> = ({ element, isSelected, customComponent: CustomComp, cursor }) => {\n  const { id, type, x, y, width, height, rotation, backgroundColor, strokeColor, strokeWidth, opacity, text } = element;\n  \n  const commonProps = {\n    'data-element-id': id,\n    fill: backgroundColor || '#ffffff',\n    stroke: strokeColor || '#000000',\n    strokeWidth: strokeWidth || 2,\n    style: { cursor, opacity }\n  };\n\n  const transform = `rotate(${rotation}, ${x + width / 2}, ${y + height / 2})`;\n\n  const renderShape = () => {\n    switch (type) {\n      case 'rectangle':\n        return <rect x={x} y={y} width={width} height={height} rx={4} ry={4} {...commonProps} />;\n      case 'ellipse':\n        return <ellipse cx={x + width / 2} cy={y + height / 2} rx={width / 2} ry={height / 2} {...commonProps} />;\n      case 'diamond':\n        const points = `${x + width / 2},${y} ${x + width},${y + height / 2} ${x + width / 2},${y + height} ${x},${y + height / 2}`;\n        return <polygon points={points} {...commonProps} />;\n      case 'text':\n        return (\n          <g transform={transform} data-element-id={id} style={{ cursor, opacity }}>\n            <text \n              x={x + width / 2} \n              y={y + height / 2} \n              textAnchor=\"middle\" \n              dominantBaseline=\"middle\"\n              className=\"lb-element-text\"\n              style={{ fontSize: 16, fill: strokeColor }}\n            >\n              {text}\n            </text>\n            <rect x={x} y={y} width={width} height={height} fill=\"transparent\" stroke={isSelected ? '#3b82f6' : 'transparent'} strokeWidth={1} />\n          </g>\n        );\n      case 'custom':\n        if (!CustomComp) return null;\n        return (\n          <foreignObject x={x} y={y} width={width} height={height} transform={transform} data-element-id={id} style={{ cursor, opacity }}>\n            <div className={`lb-element-container ${isSelected ? 'lb-element-container--selected' : ''}`}>\n              <ErrorBoundary>\n                <CustomComp width={width} height={height} data={element.props} />\n              </ErrorBoundary>\n            </div>\n          </foreignObject>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <g transform={type !== 'text' ? transform : ''}>\n      {renderShape()}\n      {isSelected && (\n        <rect \n          x={x - 4} y={y - 4} width={width + 8} height={height + 8} \n          className=\"lb-selection-rect\"\n        />\n      )}\n    </g>\n  );\n};\n\nexport default React.memo(ElementRenderer);\n","\nimport React from 'react';\nimport { Connection, CanvasElement } from '../../types';\n\ninterface ConnectionRendererProps {\n  connection: Connection;\n  elements: Record<string, CanvasElement>;\n  isSelected?: boolean;\n  cursor?: React.CSSProperties['cursor'];\n}\n\nconst ConnectionRenderer: React.FC<ConnectionRendererProps> = ({ connection, elements, isSelected = false, cursor }) => {\n  const source = elements[connection.sourceId];\n  const target = elements[connection.targetId];\n\n  if (!source || !target) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(\n        `[LumenBoard] Connection ${connection.id} has missing ${!source ? 'source' : 'target'} element (source: ${connection.sourceId}, target: ${connection.targetId})`\n      );\n    }\n    return null;\n  }\n\n  const getCenter = (el: CanvasElement) => ({\n    x: el.x + el.width / 2,\n    y: el.y + el.height / 2\n  });\n\n  const p1 = getCenter(source);\n  const p2 = getCenter(target);\n\n  const curvature = connection.style?.curvature ?? 0.5;\n  const dx = Math.abs(p2.x - p1.x) * curvature;\n  const dy = Math.abs(p2.y - p1.y) * curvature;\n\n  const cp1 = { x: p1.x + (p2.x > p1.x ? dx : -dx), y: p1.y };\n  const cp2 = { x: p2.x + (p2.x > p1.x ? -dx : dx), y: p2.y };\n\n  const path = `M ${p1.x} ${p1.y} C ${cp1.x} ${cp1.y} ${cp2.x} ${cp2.y} ${p2.x} ${p2.y}`;\n\n  const strokeColor = connection.style?.strokeColor || '#000';\n  const strokeWidth = connection.style?.width || 2;\n\n  return (\n    <g>\n      <path\n        d={path}\n        fill=\"none\"\n        stroke=\"transparent\"\n        strokeWidth={Math.max(12, strokeWidth + 10)}\n        strokeLinecap=\"round\"\n        pointerEvents=\"stroke\"\n        data-connection-id={connection.id}\n        style={{ cursor }}\n      />\n      {isSelected && (\n        <path\n          d={path}\n          fill=\"none\"\n          stroke=\"#3b82f6\"\n          strokeOpacity={0.35}\n          strokeWidth={strokeWidth + 6}\n          strokeLinecap=\"round\"\n          pointerEvents=\"none\"\n        />\n      )}\n      <path \n        d={path} \n        fill=\"none\" \n        stroke={isSelected ? '#3b82f6' : strokeColor} \n        strokeWidth={isSelected ? strokeWidth + 1 : strokeWidth} \n        strokeLinecap=\"round\"\n        className=\"lb-connection\"\n        pointerEvents=\"none\"\n      />\n      <circle cx={p2.x} cy={p2.y} r={4} fill={strokeColor} pointerEvents=\"none\" />\n    </g>\n  );\n};\n\nexport default React.memo(ConnectionRenderer);\n","import { GRID_SIZE, MAX_ELEMENT_SIZE, MIN_ELEMENT_SIZE } from '../constants';\nimport type { ResizeHandleType } from '../types';\n\nexport const clampSize = (value: number) => Math.min(Math.max(MIN_ELEMENT_SIZE, value), MAX_ELEMENT_SIZE);\n\nexport const snapValue = (value: number, enabled: boolean) =>\n  enabled ? Math.round(value / GRID_SIZE) * GRID_SIZE : value;\n\ntype ResizeDelta = { dx: number; dy: number };\ntype ResizeOptions = { snapToGrid: boolean };\n\nexport function computeResize(\n  handle: ResizeHandleType,\n  initial: { x: number; y: number; width: number; height: number },\n  delta: ResizeDelta,\n  options: ResizeOptions\n): { x: number; y: number; width: number; height: number } {\n  const { dx, dy } = delta;\n  const { snapToGrid } = options;\n  const aspect = initial.height === 0 ? 1 : initial.width / initial.height;\n\n  let x = initial.x;\n  let y = initial.y;\n  let width = initial.width;\n  let height = initial.height;\n\n  switch (handle) {\n    case 'top-left': {\n      width = clampSize(initial.width - dx);\n      height = clampSize(initial.height - dy);\n      x = initial.x + (initial.width - width);\n      y = initial.y + (initial.height - height);\n      break;\n    }\n    case 'top-right': {\n      width = clampSize(initial.width + dx);\n      height = clampSize(initial.height - dy);\n      y = initial.y + (initial.height - height);\n      break;\n    }\n    case 'bottom-left': {\n      width = clampSize(initial.width - dx);\n      height = clampSize(initial.height + dy);\n      x = initial.x + (initial.width - width);\n      break;\n    }\n    case 'bottom-right': {\n      width = clampSize(initial.width + dx);\n      height = clampSize(initial.height + dy);\n      break;\n    }\n    case 'left-center': {\n      width = clampSize(initial.width - dx);\n      x = initial.x + (initial.width - width);\n      break;\n    }\n    case 'right-center': {\n      width = clampSize(initial.width + dx);\n      break;\n    }\n    case 'top-center': {\n      height = clampSize(initial.height - dy);\n      y = initial.y + (initial.height - height);\n      break;\n    }\n    case 'bottom-center': {\n      height = clampSize(initial.height + dy);\n      break;\n    }\n  }\n\n  if (\n    handle === 'top-left' ||\n    handle === 'top-right' ||\n    handle === 'bottom-left' ||\n    handle === 'bottom-right'\n  ) {\n    const targetHeight = width / aspect;\n    const targetWidth = height * aspect;\n    const lockToWidth = Math.abs(width - initial.width) >= Math.abs(height - initial.height);\n    if (lockToWidth) {\n      height = clampSize(targetHeight);\n    } else {\n      width = clampSize(targetWidth);\n    }\n    switch (handle) {\n      case 'top-left':\n        x = initial.x + (initial.width - width);\n        y = initial.y + (initial.height - height);\n        break;\n      case 'top-right':\n        y = initial.y + (initial.height - height);\n        break;\n      case 'bottom-left':\n        x = initial.x + (initial.width - width);\n        break;\n      case 'bottom-right':\n        break;\n    }\n  }\n\n  const snappedX = snapValue(x, snapToGrid);\n  const snappedY = snapValue(y, snapToGrid);\n  const snappedWidth = snapValue(width, snapToGrid);\n  const snappedHeight = snapValue(height, snapToGrid);\n\n  return {\n    x: snappedX,\n    y: snappedY,\n    width: snappedWidth,\n    height: snappedHeight,\n  };\n}\n","import { useCallback, useState, useRef, useEffect } from 'react';\nimport type React from 'react';\nimport type { RefObject } from 'react';\nimport type { CanvasElement, ElementType, ResizeHandleType, SceneState, Tool } from '../types';\nimport { GRID_SIZE } from '../constants';\nimport { createConnectionId, createElementId } from '../utils/ids';\nimport { screenToWorldPoint } from '../utils/viewport';\nimport { deleteConnectionsForElements, deleteElementsFromMap } from '../utils/scene';\nimport { clampSize, snapValue, computeResize } from '../utils/math';\n\nexport type UseSvgCanvasInteractionsArgs = {\n  svgRef: RefObject<SVGSVGElement>;\n  scene: SceneState;\n  selectedIds: string[];\n  activeTool: Tool;\n  keepToolActive?: boolean;\n  snapToGrid?: boolean;\n  onUpdateScene: (updater: (prev: SceneState) => SceneState) => void;\n  onSelect: (ids: string[]) => void;\n  onToolChange?: (tool: Tool) => void;\n};\n\nexport function useSvgCanvasInteractions({\n  svgRef,\n  scene,\n  selectedIds,\n  activeTool,\n  keepToolActive,\n  snapToGrid,\n  onUpdateScene,\n  onSelect,\n  onToolChange,\n}: UseSvgCanvasInteractionsArgs) {\n  const { view, elements } = scene;\n\n  const [dragState, setDragState] = useState<{\n    type: 'pan' | 'element' | 'create' | 'resize';\n    startPos: { x: number; y: number };\n    initialElements?: Record<string, CanvasElement>;\n    targetId?: string;\n    resizeHandle?: ResizeHandleType;\n    initialDimensions?: { x: number; y: number; width: number; height: number };\n  } | null>(null);\n\n  const [pendingConnection, setPendingConnection] = useState<{\n    sourceId: string;\n    currentPos: { x: number; y: number };\n  } | null>(null);\n\n  // RAF throttling for pointer move events\n  const rafIdRef = useRef<number | null>(null);\n  const pendingMoveEventRef = useRef<React.PointerEvent | null>(null);\n\n  // Cleanup RAF on unmount\n  useEffect(() => {\n    return () => {\n      if (rafIdRef.current !== null) {\n        cancelAnimationFrame(rafIdRef.current);\n      }\n    };\n  }, []);\n\n  const screenToWorld = useCallback(\n    (clientX: number, clientY: number) => {\n      const rect = svgRef.current?.getBoundingClientRect();\n      if (!rect) return { x: 0, y: 0 };\n      return screenToWorldPoint(clientX, clientY, rect, view);\n    },\n    [svgRef, view]\n  );\n\n  const handlePointerDown = useCallback(\n    (e: React.PointerEvent) => {\n      const worldPos = screenToWorld(e.clientX, e.clientY);\n      const target = e.target as SVGElement;\n      const elementId = target.closest('[data-element-id]')?.getAttribute('data-element-id');\n      const connectionId = target.closest('[data-connection-id]')?.getAttribute('data-connection-id');\n      const resizeHandle = target.closest('[data-resize-handle]')?.getAttribute('data-resize-handle') as ResizeHandleType | null;\n      const resizeTargetId = target.closest('[data-resize-target]')?.getAttribute('data-resize-target');\n\n      if (activeTool === 'pointer' && resizeHandle && resizeTargetId) {\n        const el = elements[resizeTargetId];\n        if (el && !el.locked) {\n          setDragState({\n            type: 'resize',\n            startPos: worldPos,\n            initialElements: { ...elements },\n            targetId: resizeTargetId,\n            resizeHandle,\n            initialDimensions: { x: el.x, y: el.y, width: el.width, height: el.height },\n          });\n          try {\n            (e.target as Element).setPointerCapture(e.pointerId);\n          } catch {\n            // Pointer capture may fail if element is removed or pointer is invalid\n          }\n          return;\n        }\n      }\n\n      if (activeTool === 'pointer' && !elementId && connectionId) {\n        if (!selectedIds.includes(connectionId)) {\n          onSelect(e.shiftKey ? [...selectedIds, connectionId] : [connectionId]);\n        }\n      } else if (activeTool === 'hand' || (activeTool === 'pointer' && !elementId && !connectionId)) {\n        if (activeTool === 'pointer') {\n          onSelect([]);\n        }\n        setDragState({ type: 'pan', startPos: { x: e.clientX, y: e.clientY } });\n      } else if (activeTool === 'pointer' && elementId) {\n        if (!selectedIds.includes(elementId)) {\n          onSelect(e.shiftKey ? [...selectedIds, elementId] : [elementId]);\n        }\n        setDragState({\n          type: 'element',\n          startPos: worldPos,\n          initialElements: { ...elements },\n        });\n      } else if (['rectangle', 'ellipse', 'diamond', 'text'].includes(activeTool)) {\n        const id = createElementId(false);\n        const newElement: CanvasElement = {\n          id,\n          type: activeTool as ElementType,\n          x: snapToGrid ? Math.round(worldPos.x / GRID_SIZE) * GRID_SIZE : worldPos.x,\n          y: snapToGrid ? Math.round(worldPos.y / GRID_SIZE) * GRID_SIZE : worldPos.y,\n          width: 10,\n          height: 10,\n          rotation: 0,\n          opacity: 1,\n          locked: false,\n          backgroundColor: '#ffffff',\n          strokeColor: '#000000',\n          strokeWidth: 2,\n          text: activeTool === 'text' ? 'Double click to edit' : '',\n        };\n\n        onUpdateScene((s) => ({ ...s, elements: { ...s.elements, [id]: newElement } }));\n        onSelect([id]);\n        setDragState({ type: 'create', startPos: worldPos, targetId: id });\n      } else if (activeTool === 'connection') {\n        if (elementId) {\n          if (pendingConnection) {\n            if (elementId !== pendingConnection.sourceId) {\n              const id = createConnectionId(false);\n              onUpdateScene((s) => ({\n                ...s,\n                connections: [\n                  ...s.connections,\n                  {\n                    id,\n                    sourceId: pendingConnection.sourceId,\n                    targetId: elementId,\n                    style: { strokeColor: '#000000', width: 2, curvature: 0.5 },\n                  },\n                ],\n              }));\n\n              if (!keepToolActive && onToolChange) {\n                onToolChange('pointer');\n              }\n            }\n            setPendingConnection(null);\n          } else {\n            setPendingConnection({ sourceId: elementId, currentPos: worldPos });\n          }\n        } else {\n          setPendingConnection(null);\n        }\n        return;\n      } else if (activeTool === 'eraser' && (elementId || connectionId)) {\n        if (elementId) {\n          onUpdateScene((s) => {\n            const newElements = deleteElementsFromMap(s.elements, [elementId]);\n            return {\n              ...s,\n              elements: newElements,\n              connections: deleteConnectionsForElements(s.connections, [elementId]),\n            };\n          });\n        } else if (connectionId) {\n          onUpdateScene((s) => ({\n            ...s,\n            connections: s.connections.filter((c) => c.id !== connectionId),\n          }));\n        }\n\n        if (!keepToolActive && onToolChange) {\n          onToolChange('pointer');\n        }\n      }\n\n      try {\n        (e.target as Element).setPointerCapture(e.pointerId);\n      } catch {\n        // Pointer capture may fail if element is removed or pointer is invalid\n      }\n    },\n    [\n      activeTool,\n      elements,\n      keepToolActive,\n      onSelect,\n      onUpdateScene,\n      onToolChange,\n      pendingConnection,\n      screenToWorld,\n      selectedIds,\n      snapToGrid,\n    ]\n  );\n\n  const handlePointerMove = useCallback(\n    (e: React.PointerEvent) => {\n      // Store the event for RAF processing\n      pendingMoveEventRef.current = e;\n\n      // If RAF is already scheduled, skip\n      if (rafIdRef.current !== null) return;\n\n      // Schedule update on next frame\n      rafIdRef.current = requestAnimationFrame(() => {\n        rafIdRef.current = null;\n        const event = pendingMoveEventRef.current;\n        if (!event) return;\n\n        if (pendingConnection) {\n          const worldPos = screenToWorld(event.clientX, event.clientY);\n          setPendingConnection({ ...pendingConnection, currentPos: worldPos });\n        }\n\n        if (!dragState) return;\n\n        if (dragState.type === 'pan') {\n          const dx = event.clientX - dragState.startPos.x;\n          const dy = event.clientY - dragState.startPos.y;\n          onUpdateScene((s) => ({\n            ...s,\n            view: { ...s.view, x: s.view.x + dx, y: s.view.y + dy },\n          }));\n          setDragState({ ...dragState, startPos: { x: event.clientX, y: event.clientY } });\n        } else if (dragState.type === 'element') {\n          const worldPos = screenToWorld(event.clientX, event.clientY);\n          const dx = worldPos.x - dragState.startPos.x;\n          const dy = worldPos.y - dragState.startPos.y;\n\n          onUpdateScene((s) => {\n            const nextElements = { ...s.elements };\n            selectedIds.forEach((id) => {\n              const initial = dragState.initialElements?.[id];\n              if (initial) {\n                let nx = initial.x + dx;\n                let ny = initial.y + dy;\n                if (snapToGrid) {\n                  nx = Math.round(nx / GRID_SIZE) * GRID_SIZE;\n                  ny = Math.round(ny / GRID_SIZE) * GRID_SIZE;\n                }\n                nextElements[id] = { ...nextElements[id], x: nx, y: ny };\n              }\n            });\n            return { ...s, elements: nextElements };\n          });\n        } else if (dragState.type === 'create' && dragState.targetId) {\n          const worldPos = screenToWorld(event.clientX, event.clientY);\n          const width = Math.max(20, worldPos.x - dragState.startPos.x);\n          const height = Math.max(20, worldPos.y - dragState.startPos.y);\n          onUpdateScene((s) => ({\n            ...s,\n            elements: {\n              ...s.elements,\n              [dragState.targetId!]: {\n                ...s.elements[dragState.targetId!],\n                width,\n                height,\n              },\n            },\n          }));\n        } else if (dragState.type === 'resize' && dragState.targetId && dragState.resizeHandle && dragState.initialDimensions) {\n          const worldPos = screenToWorld(event.clientX, event.clientY);\n          const dx = worldPos.x - dragState.startPos.x;\n          const dy = worldPos.y - dragState.startPos.y;\n\n          onUpdateScene((s) => {\n            const nextElements = { ...s.elements };\n            const initial = dragState.initialElements?.[dragState.targetId];\n            if (!initial) {\n              return s;\n            }\n\n            const updated = computeResize(\n              dragState.resizeHandle,\n              dragState.initialDimensions,\n              { dx, dy },\n              { snapToGrid: false }\n            );\n\n            nextElements[dragState.targetId] = { ...nextElements[dragState.targetId], ...updated };\n            return { ...s, elements: nextElements };\n          });\n        }\n      });\n    },\n    [dragState, onUpdateScene, pendingConnection, screenToWorld, selectedIds, snapToGrid]\n  );\n\n  const handlePointerUp = useCallback(\n    (e: React.PointerEvent) => {\n      if (dragState?.type === 'create' && onToolChange && !keepToolActive) {\n        onToolChange('pointer');\n      }\n\n      if (dragState?.type === 'resize' && dragState.targetId && dragState.resizeHandle && dragState.initialDimensions) {\n        const worldPos = screenToWorld(e.clientX, e.clientY);\n        const dx = worldPos.x - dragState.startPos.x;\n        const dy = worldPos.y - dragState.startPos.y;\n\n        onUpdateScene((s) => {\n          const nextElements = { ...s.elements };\n          const initial = dragState.initialElements?.[dragState.targetId];\n          if (!initial) {\n            return s;\n          }\n\n          const updated = computeResize(\n            dragState.resizeHandle!,\n            dragState.initialDimensions!,\n            { dx, dy },\n            { snapToGrid: Boolean(snapToGrid) }\n          );\n\n          nextElements[dragState.targetId!] = { ...nextElements[dragState.targetId!], ...updated };\n          return { ...s, elements: nextElements };\n        });\n      }\n\n      setDragState(null);\n    },\n    [dragState, keepToolActive, onToolChange, onUpdateScene, screenToWorld, snapToGrid]\n  );\n\n  const handleWheel = useCallback((e: React.WheelEvent) => {\n    e.preventDefault();\n  }, []);\n\n  return {\n    dragState,\n    pendingConnection,\n    setPendingConnection,\n    screenToWorld,\n    handlePointerDown,\n    handlePointerMove,\n    handlePointerUp,\n    handleWheel,\n  };\n}\n","import React from 'react';\nimport type { CanvasElement } from '../../types';\n\ntype ConnectionPreviewProps = {\n  source: CanvasElement;\n  currentPos: { x: number; y: number };\n};\n\nconst ConnectionPreview: React.FC<ConnectionPreviewProps> = ({ source, currentPos }) => {\n  const p1 = { x: source.x + source.width / 2, y: source.y + source.height / 2 };\n  const p2 = currentPos;\n  const curvature = 0.5;\n  const dx = Math.abs(p2.x - p1.x) * curvature;\n  const cp1 = { x: p1.x + (p2.x > p1.x ? dx : -dx), y: p1.y };\n  const cp2 = { x: p2.x + (p2.x > p1.x ? -dx : dx), y: p2.y };\n  const path = `M ${p1.x} ${p1.y} C ${cp1.x} ${cp1.y} ${cp2.x} ${cp2.y} ${p2.x} ${p2.y}`;\n\n  return (\n    <g pointerEvents=\"none\">\n      <path\n        d={path}\n        fill=\"none\"\n        stroke=\"#3b82f6\"\n        strokeWidth={2}\n        strokeDasharray=\"4 2\"\n        className=\"lb-connection-preview\"\n      />\n      <circle cx={p2.x} cy={p2.y} r={4} fill=\"#3b82f6\" />\n    </g>\n  );\n};\n\nexport default ConnectionPreview;\n","import React from 'react';\nimport type { CanvasElement, ResizeHandleType } from '../../types';\n\nexport interface ResizeHandlesProps {\n  element: CanvasElement;\n  onPointerDown?: (handle: ResizeHandleType, event: React.PointerEvent) => void;\n}\n\ntype HandleConfig = {\n  type: ResizeHandleType;\n  cursor: React.CSSProperties['cursor'];\n  getPosition: (el: CanvasElement) => { x: number; y: number };\n};\n\nconst HANDLE_SIZE = 8;\nconst SELECTION_PADDING = 4;\n\nconst HANDLES: HandleConfig[] = [\n  {\n    type: 'top-left',\n    cursor: 'nwse-resize',\n    getPosition: (el) => ({ x: el.x - SELECTION_PADDING, y: el.y - SELECTION_PADDING }),\n  },\n  {\n    type: 'top-center',\n    cursor: 'ns-resize',\n    getPosition: (el) => ({ x: el.x + el.width / 2, y: el.y - SELECTION_PADDING }),\n  },\n  {\n    type: 'top-right',\n    cursor: 'nesw-resize',\n    getPosition: (el) => ({ x: el.x + el.width + SELECTION_PADDING, y: el.y - SELECTION_PADDING }),\n  },\n  {\n    type: 'right-center',\n    cursor: 'ew-resize',\n    getPosition: (el) => ({ x: el.x + el.width + SELECTION_PADDING, y: el.y + el.height / 2 }),\n  },\n  {\n    type: 'bottom-right',\n    cursor: 'nwse-resize',\n    getPosition: (el) => ({ x: el.x + el.width + SELECTION_PADDING, y: el.y + el.height + SELECTION_PADDING }),\n  },\n  {\n    type: 'bottom-center',\n    cursor: 'ns-resize',\n    getPosition: (el) => ({ x: el.x + el.width / 2, y: el.y + el.height + SELECTION_PADDING }),\n  },\n  {\n    type: 'bottom-left',\n    cursor: 'nesw-resize',\n    getPosition: (el) => ({ x: el.x - SELECTION_PADDING, y: el.y + el.height + SELECTION_PADDING }),\n  },\n  {\n    type: 'left-center',\n    cursor: 'ew-resize',\n    getPosition: (el) => ({ x: el.x - SELECTION_PADDING, y: el.y + el.height / 2 }),\n  },\n];\n\nconst ResizeHandles: React.FC<ResizeHandlesProps> = ({ element, onPointerDown }) => {\n  return (\n    <>\n      {HANDLES.map((handle) => {\n        const pos = handle.getPosition(element);\n        return (\n          <rect\n            key={handle.type}\n            data-handle={handle.type}\n            data-resize-handle={handle.type}\n            data-resize-target={element.id}\n            x={pos.x - HANDLE_SIZE / 2}\n            y={pos.y - HANDLE_SIZE / 2}\n            width={HANDLE_SIZE}\n            height={HANDLE_SIZE}\n            rx={1}\n            ry={1}\n            className=\"lb-resize-handle\"\n            style={{ cursor: handle.cursor }}\n            onPointerDown={(e) => {\n              // Allow bubbling so the canvas interaction hook can manage drag state.\n              onPointerDown?.(handle.type, e);\n            }}\n          />\n        );\n      })}\n    </>\n  );\n};\n\nexport default React.memo(ResizeHandles);\n","\nimport React, { useRef, useMemo } from 'react';\nimport { SceneState, CanvasElement, Tool } from '../../types';\nimport ElementRenderer from '../elements/ElementRenderer';\nimport ConnectionRenderer from '../elements/ConnectionRenderer';\nimport { useSvgCanvasInteractions } from '../../hooks/useSvgCanvasInteractions';\nimport ConnectionPreview from './ConnectionPreview';\nimport ResizeHandles from './ResizeHandles';\n\ninterface SVGCanvasProps {\n  scene: SceneState;\n  selectedIds: string[];\n  activeTool: Tool;\n  keepToolActive?: boolean;\n  onUpdateScene: (updater: (prev: SceneState) => SceneState) => void;\n  onSelect: (ids: string[]) => void;\n  customComponents: Record<string, React.FC<any>>;\n  snapToGrid?: boolean;\n  onToolChange?: (tool: Tool) => void;\n}\n\nconst SVGCanvas: React.FC<SVGCanvasProps> = ({ \n  scene, \n  selectedIds, \n  activeTool, \n  keepToolActive,\n  onUpdateScene, \n  onSelect,\n  customComponents,\n  snapToGrid,\n  onToolChange\n}) => {\n  const { view, elements, connections } = scene;\n  const svgRef = useRef<SVGSVGElement>(null);\n\n  const {\n    dragState,\n    pendingConnection,\n    handlePointerDown,\n    handlePointerMove,\n    handlePointerUp,\n    handleWheel,\n  } = useSvgCanvasInteractions({\n    svgRef,\n    scene,\n    selectedIds,\n    activeTool,\n    keepToolActive,\n    snapToGrid,\n    onUpdateScene,\n    onSelect,\n    onToolChange,\n  });\n\n  const transform = `translate(${view.x}, ${view.y}) scale(${view.zoom})`;\n\n  // Memoize single selected element computation (Fix 6.3)\n  const singleSelectedElement = useMemo(\n    () => (selectedIds.length === 1 ? elements[selectedIds[0]] : undefined),\n    [selectedIds, elements]\n  );\n\n  // Viewport culling: only render elements within viewport bounds (Fix 6.5)\n  const visibleElements = useMemo(() => {\n    const rect = svgRef.current?.getBoundingClientRect();\n    if (!rect) return Object.values(elements) as CanvasElement[];\n\n    // Calculate viewport bounds in world coordinates\n    const padding = 200; // Extra padding to avoid pop-in\n    const minX = (-view.x - padding) / view.zoom;\n    const minY = (-view.y - padding) / view.zoom;\n    const maxX = (rect.width - view.x + padding) / view.zoom;\n    const maxY = (rect.height - view.y + padding) / view.zoom;\n\n    return (Object.values(elements) as CanvasElement[]).filter((el) => {\n      // Check if element intersects with viewport\n      const elRight = el.x + el.width;\n      const elBottom = el.y + el.height;\n      return !(el.x > maxX || elRight < minX || el.y > maxY || elBottom < minY);\n    });\n  }, [elements, view, svgRef]);\n\n  const isDragging = Boolean(dragState);\n  const canvasCursor: React.CSSProperties['cursor'] = isDragging\n    ? 'grabbing'\n    : activeTool === 'hand'\n      ? 'grab'\n      : 'default';\n\n  const hoverCursor: React.CSSProperties['cursor'] = isDragging\n    ? 'grabbing'\n    : activeTool === 'pointer'\n      ? 'pointer'\n      : undefined;\n\n  return (\n    <svg \n      ref={svgRef}\n      className=\"lb-svg-canvas\"\n      style={{ cursor: canvasCursor }}\n      onPointerDown={handlePointerDown}\n      onPointerMove={handlePointerMove}\n      onPointerUp={handlePointerUp}\n      onWheel={handleWheel}\n      onContextMenu={e => e.preventDefault()}\n    >\n      <g transform={transform}>\n        {/* Connections */}\n        {connections.map(conn => (\n          <ConnectionRenderer \n            key={conn.id} \n            connection={conn} \n            elements={elements} \n            isSelected={selectedIds.includes(conn.id)}\n            cursor={hoverCursor}\n          />\n        ))}\n\n        {/* Elements (with viewport culling) */}\n        {visibleElements.map(el => (\n          <ElementRenderer \n            key={el.id} \n            element={el} \n            isSelected={selectedIds.includes(el.id)}\n            customComponent={el.componentType ? customComponents[el.componentType] : undefined}\n            cursor={hoverCursor}\n          />\n        ))}\n\n        {/* Resize Handles for single element selection */}\n        {singleSelectedElement && !singleSelectedElement.locked && (\n          <ResizeHandles element={singleSelectedElement} />\n        )}\n\n        {/* Active Connection Line Preview */}\n        {pendingConnection && elements[pendingConnection.sourceId] && (\n          <ConnectionPreview\n            source={elements[pendingConnection.sourceId]}\n            currentPos={pendingConnection.currentPos}\n          />\n        )}\n      </g>\n    </svg>\n  );\n};\n\nexport default SVGCanvas;\n","\nimport React from 'react';\nimport { ViewState } from '../../types';\nimport { GRID_SIZE } from '../../constants';\n\ninterface GridLayerProps {\n  view: ViewState;\n}\n\nconst GridLayer: React.FC<GridLayerProps> = ({ view }) => {\n  const size = GRID_SIZE * view.zoom;\n  const offsetX = view.x % size;\n  const offsetY = view.y % size;\n\n  return (\n    <div \n      className=\"lb-grid-layer\"\n      style={{\n        backgroundImage: `radial-gradient(circle, #4b5563 1px, transparent 1px)`,\n        backgroundSize: `${size}px ${size}px`,\n        backgroundPosition: `${offsetX}px ${offsetY}px`\n      }}\n    />\n  );\n};\n\nexport default React.memo(GridLayer);\n","import React from 'react';\n\nexport const Icons = {\n  Pointer: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <path d=\"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z\" />\n      <path d=\"m13 13 6 6\" />\n    </svg>\n  ),\n  Hand: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <path d=\"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0\" />\n      <path d=\"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2\" />\n      <path d=\"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8\" />\n      <path d=\"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15\" />\n    </svg>\n  ),\n  Square: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <rect width=\"18\" height=\"18\" x=\"3\" y=\"3\" rx=\"2\" />\n    </svg>\n  ),\n  Circle: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\n    </svg>\n  ),\n  Diamond: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <path d=\"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0l-7.59 7.59Z\" />\n    </svg>\n  ),\n  Type: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <polyline points=\"4 7 4 4 20 4 20 7\" />\n      <line x1=\"9\" x2=\"15\" y1=\"20\" y2=\"20\" />\n      <line x1=\"12\" x2=\"12\" y1=\"4\" y2=\"20\" />\n    </svg>\n  ),\n  ArrowRight: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <path d=\"M5 12h14\" />\n      <path d=\"m12 5 7 7-7 7\" />\n    </svg>\n  ),\n  Eraser: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <path d=\"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21\" />\n      <path d=\"M22 21H7\" />\n      <path d=\"m5 11 9 9\" />\n    </svg>\n  ),\n  Lock: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <rect width=\"18\" height=\"11\" x=\"3\" y=\"11\" rx=\"2\" ry=\"2\" />\n      <path d=\"M7 11V7a5 5 0 0 1 10 0v4\" />\n    </svg>\n  ),\n  Unlock: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <rect width=\"18\" height=\"11\" x=\"3\" y=\"11\" rx=\"2\" ry=\"2\" />\n      <path d=\"M7 11V7a5 5 0 0 1 9.9-1\" />\n    </svg>\n  ),\n  Layers: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <path d=\"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z\" />\n      <path d=\"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65\" />\n      <path d=\"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65\" />\n    </svg>\n  ),\n  Plus: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <path d=\"M5 12h14\" />\n      <path d=\"M12 5v14\" />\n    </svg>\n  ),\n  Minus: (props: React.SVGProps<SVGSVGElement>) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\n      <path d=\"M5 12h14\" />\n    </svg>\n  )\n};\n","\nimport React from 'react';\nimport { Tool } from '../../types';\nimport { Icons } from './Icons';\n\ninterface ToolbarProps {\n  activeTool: Tool;\n  onToolSelect: (tool: Tool) => void;\n  keepToolActive: boolean;\n  onToggleKeepToolActive: () => void;\n}\n\nconst Toolbar: React.FC<ToolbarProps> = ({ activeTool, onToolSelect, keepToolActive, onToggleKeepToolActive }) => {\n\n  const tools: { id: Tool; icon: React.FC<React.SVGProps<SVGSVGElement>>; label: string }[] = [\n    { id: 'pointer', icon: Icons.Pointer, label: 'Select' },\n    { id: 'hand', icon: Icons.Hand, label: 'Pan' },\n    { id: 'rectangle', icon: Icons.Square, label: 'Rectangle' },\n    { id: 'ellipse', icon: Icons.Circle, label: 'Ellipse' },\n    { id: 'diamond', icon: Icons.Diamond, label: 'Diamond' },\n    { id: 'text', icon: Icons.Type, label: 'Text' },\n    { id: 'connection', icon: Icons.ArrowRight, label: 'Connect' },\n    { id: 'eraser', icon: Icons.Eraser, label: 'Eraser' },\n  ];\n\n  return (\n    <div className=\"lb-toolbar\">\n      {tools.map(tool => (\n        <button\n          key={tool.id}\n          onClick={() => onToolSelect(tool.id)}\n          className={`lb-tool-button ${activeTool === tool.id ? 'lb-tool-button--active' : ''}`}\n          title={tool.label}\n        >\n          <tool.icon width={20} height={20} />\n        </button>\n      ))}\n\n      <div className=\"lb-toolbar__separator\" />\n\n      <button\n        onClick={onToggleKeepToolActive}\n        className={`lb-tool-button ${keepToolActive ? 'lb-tool-button--active' : ''}`}\n        title=\"Keep selected tool active after use\"\n      >\n        {keepToolActive ? <Icons.Lock width={18} height={18} /> : <Icons.Unlock width={18} height={18} />}\n      </button>\n    </div>\n  );\n};\n\nexport default Toolbar;\n","\nimport React from 'react';\nimport { CanvasElement } from '../../types';\nimport { Icons } from './Icons';\n\ninterface PropertiesPanelProps {\n  elements: CanvasElement[];\n  onUpdate: (updates: Partial<CanvasElement>) => void;\n}\n\nconst PropertiesPanel: React.FC<PropertiesPanelProps> = ({ elements, onUpdate }) => {\n  if (elements.length === 0) return null;\n\n  const isText = elements.every(el => el.type === 'text');\n  const first = elements[0];\n\n  return (\n    <div className=\"lb-properties-panel\">\n      <h3 className=\"lb-properties-panel__title\">Properties</h3>\n      \n      <div className=\"space-y-4\">\n        {/* Background Color */}\n        {!isText && (\n          <div className=\"lb-property-group\">\n            <label className=\"lb-property-label\">Background</label>\n            <div className=\"lb-color-grid\">\n              {['#ffffff', '#fecaca', '#fde68a', '#bbf7d0', '#bfdbfe', '#ddd6fe'].map(color => (\n                <button\n                  key={color}\n                  onClick={() => onUpdate({ backgroundColor: color })}\n                  className=\"lb-color-swatch\"\n                  style={{ backgroundColor: color }}\n                />\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Text Content */}\n        {isText && (\n          <div className=\"lb-property-group\">\n            <label className=\"lb-property-label\">Text Value</label>\n            <input \n              type=\"text\"\n              value={first.text || ''}\n              onChange={(e) => onUpdate({ text: e.target.value })}\n              className=\"lb-input\"\n            />\n          </div>\n        )}\n\n        {/* Stroke Color */}\n        <div className=\"lb-property-group\">\n          <label className=\"lb-property-label\">Stroke</label>\n          <div className=\"lb-color-grid\">\n            {['#000000', '#dc2626', '#d97706', '#059669', '#2563eb', '#7c3aed'].map(color => (\n              <button\n                key={color}\n                onClick={() => onUpdate({ strokeColor: color })}\n                className=\"lb-color-swatch\"\n                style={{ backgroundColor: color }}\n              />\n            ))}\n          </div>\n        </div>\n\n        {/* Opacity Slider */}\n        <div className=\"lb-property-group\">\n          <label className=\"lb-property-label\">Opacity</label>\n          <input \n            type=\"range\" \n            min=\"0\" max=\"1\" step=\"0.1\" \n            value={first.opacity ?? 1}\n            onChange={(e) => onUpdate({ opacity: parseFloat(e.target.value) })}\n            className=\"lb-slider\"\n          />\n        </div>\n\n        {/* Layer Controls */}\n        <div className=\"lb-panel-footer\">\n           <button className=\"lb-text-button\">\n             <div className=\"lb-icon-mr\"><Icons.Layers width={14} height={14} /></div> Bring Forward\n           </button>\n           <button className=\"lb-text-button\">\n             <div className=\"lb-icon-mr\"><Icons.Lock width={12} height={12} /></div> Lock\n           </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PropertiesPanel;\n","\nimport React from 'react';\nimport { Icons } from './Icons';\n\ninterface ZoomControlsProps {\n  zoom: number;\n  onZoomIn: () => void;\n  onZoomOut: () => void;\n  onFitView: () => void;\n}\n\nconst ZoomControls: React.FC<ZoomControlsProps> = ({ zoom, onZoomIn, onZoomOut, onFitView }) => {\n  return (\n    <div className=\"lb-zoom-controls\">\n      <button \n        onClick={onZoomOut}\n        className=\"lb-zoom-button\"\n      >\n        <Icons.Minus width={12} height={12} />\n      </button>\n      <span className=\"lb-zoom-value\">\n        {Math.round(zoom * 100)}%\n      </span>\n      <button \n        onClick={onZoomIn}\n        className=\"lb-zoom-button\"\n      >\n        <Icons.Plus width={12} height={12} />\n      </button>\n      <div className=\"lb-zoom-separator\" />\n      <button \n        onClick={onFitView}\n        className=\"lb-fit-button\"\n      >\n        Fit View\n      </button>\n    </div>\n  );\n};\n\nexport default ZoomControls;\n","\nimport React, { useState, useCallback, useRef, useImperativeHandle, forwardRef, useEffect, useMemo } from 'react';\nimport { SceneState, CanvasElement, Tool, InfiniteCanvasRef } from '../../types';\nimport { INITIAL_STATE } from '../../constants';\nimport { useInfiniteCanvasApi } from '../../hooks/useInfiniteCanvasApi';\nimport { deleteConnectionsForElements, deleteElementsFromMap } from '../../utils/scene';\nimport SVGCanvas from './SVGCanvas';\nimport GridLayer from '../layers/GridLayer';\nimport Toolbar from '../ui/Toolbar';\nimport PropertiesPanel from '../ui/PropertiesPanel';\nimport ZoomControls from '../ui/ZoomControls';\nimport { ErrorBoundary } from '../ErrorBoundary';\n\ninterface InfiniteCanvasProps {\n  initialData?: SceneState;\n  config?: {\n    readonly?: boolean;\n    grid?: boolean;\n    snapToGrid?: boolean;\n    theme?: 'light' | 'dark';\n    keepToolActive?: boolean;\n  };\n  uiConfig?: {\n    showToolbar?: boolean;\n    showZoomControls?: boolean;\n    showPropertiesPanel?: boolean;\n  };\n  components?: Record<string, React.FC<any>>;\n  onChange?: (data: SceneState) => void;\n  onSelectionChange?: (selectedIds: string[]) => void;\n  onElementAdd?: (element: CanvasElement) => void;\n}\n\nconst InfiniteCanvas = forwardRef<InfiniteCanvasRef, InfiniteCanvasProps>((props, ref) => {\n  const { \n    initialData = INITIAL_STATE, \n    config = {}, \n    uiConfig = { showToolbar: true, showZoomControls: true, showPropertiesPanel: true },\n    components = {},\n    onChange,\n    onSelectionChange\n  } = props;\n\n  // Proper React state management\n  const [scene, setScene] = useState<SceneState>(initialData);\n  const [selectedIds, setSelectedIds] = useState<string[]>([]);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [activeTool, setActiveTool] = useState<Tool>('pointer');\n  // Removed internal keepToolActive state, now derived from config\n  const keepToolActive = config.keepToolActive ?? false;\n\n  // Keep refs in sync for imperative API methods that need current values\n  const sceneRef = useRef<SceneState>(scene);\n  const selectedIdsRef = useRef<string[]>(selectedIds);\n  sceneRef.current = scene;\n  selectedIdsRef.current = selectedIds;\n\n  // Sync with initialData if provided externally\n  useEffect(() => {\n    let isMounted = true;\n    if (initialData && isMounted) {\n      setScene(initialData);\n    }\n    return () => {\n      isMounted = false;\n    };\n  }, [initialData]);\n\n  const updateScene = useCallback((updater: (prev: SceneState) => SceneState) => {\n    let nextScene: SceneState;\n    setScene((prev) => {\n      nextScene = updater(prev);\n      return nextScene;\n    });\n    // Note: onChange is called with the new state, but due to React's batching,\n    // the state may not be immediately available via ref after this call\n    onChange?.(nextScene!);\n    return nextScene!;\n  }, [onChange]);\n\n  const handleSelection = useCallback((ids: string[]) => {\n    setSelectedIds(ids);\n    onSelectionChange?.(ids);\n  }, [onSelectionChange]);\n\n  useEffect(() => {\n    const onKeyDown = (e: KeyboardEvent) => {\n      if (config.readonly) return;\n      if (e.key !== 'Backspace' && e.key !== 'Delete') return;\n\n      const active = document.activeElement as HTMLElement | null;\n      if (active) {\n        const tag = active.tagName;\n        if (tag === 'INPUT' || tag === 'TEXTAREA' || (active as any).isContentEditable) return;\n      }\n\n      const ids = selectedIdsRef.current;\n      if (ids.length === 0) return;\n\n      e.preventDefault();\n\n      updateScene((prev) => {\n        const selectedElements = ids.filter((id) => Boolean(prev.elements[id]));\n        const selectedConnections = ids.filter((id) => prev.connections.some((c) => c.id === id));\n\n        const nextElements = selectedElements.length > 0 ? deleteElementsFromMap(prev.elements, selectedElements) : prev.elements;\n\n        let nextConnections = prev.connections;\n        if (selectedElements.length > 0) {\n          nextConnections = deleteConnectionsForElements(nextConnections, selectedElements);\n        }\n        if (selectedConnections.length > 0) {\n          const idSet = new Set(selectedConnections);\n          nextConnections = nextConnections.filter((c) => !idSet.has(c.id));\n        }\n\n        return { ...prev, elements: nextElements, connections: nextConnections };\n      });\n\n      handleSelection([]);\n    };\n\n    window.addEventListener('keydown', onKeyDown);\n    return () => window.removeEventListener('keydown', onKeyDown);\n  }, [config.readonly, handleSelection, updateScene]);\n\n  const api = useInfiniteCanvasApi({\n    sceneRef,\n    selectedIdsRef,\n    containerRef,\n    updateScene,\n    handleSelection,\n  });\n\n  useImperativeHandle(ref, () => api, [api]);\n\n  return (\n    <div \n      ref={containerRef}\n      className={`lb-canvas-container ${activeTool === 'hand' ? 'lb-canvas-container--hand' : 'lb-canvas-container--default'}`}\n    >\n      {config.grid !== false && <GridLayer view={scene.view} />}\n      \n      <ErrorBoundary fallback={\n        <div style={{ \n          position: 'absolute', \n          top: 0, \n          left: 0, \n          right: 0, \n          bottom: 0, \n          display: 'flex', \n          alignItems: 'center', \n          justifyContent: 'center', \n          color: '#ef4444',\n          backgroundColor: '#fef2f2' \n        }}>\n          <div>\n            <h3>Something went wrong</h3>\n            <p>The canvas encountered an error and cannot be displayed.</p>\n          </div>\n        </div>\n      }>\n        <SVGCanvas \n          scene={scene}\n          selectedIds={selectedIds}\n          activeTool={activeTool}\n          keepToolActive={keepToolActive}\n          onUpdateScene={updateScene}\n          onSelect={handleSelection}\n          customComponents={components}\n          snapToGrid={config.snapToGrid}\n          onToolChange={setActiveTool}\n        />\n      </ErrorBoundary>\n\n      {uiConfig.showToolbar && (\n        <Toolbar \n          activeTool={activeTool} \n          onToolSelect={setActiveTool} \n          keepToolActive={keepToolActive}\n          // Removing internal toggle for now as it's controlled via config\n          onToggleKeepToolActive={() => {}}\n        />\n      )}\n\n      {uiConfig.showZoomControls && (\n        <ZoomControls \n          zoom={scene.view.zoom} \n          onZoomIn={() => api.zoomIn()} \n          onZoomOut={() => api.zoomOut()}\n          onFitView={() => api.fitView()}\n        />\n      )}\n\n      {uiConfig.showPropertiesPanel && selectedIds.length > 0 && (\n        <PropertiesPanel \n          elements={selectedIds.map(id => scene.elements[id]).filter(Boolean)}\n          onUpdate={(updates) => {\n            updateScene(prev => {\n              const newElements = { ...prev.elements };\n              selectedIds.forEach(id => {\n                if (newElements[id]) {\n                  newElements[id] = { ...newElements[id], ...updates };\n                }\n              });\n              return { ...prev, elements: newElements };\n            });\n          }}\n        />\n      )}\n\n    </div>\n  );\n});\n\nexport default InfiniteCanvas;\n","import React, { useRef } from 'react';\nimport { InfiniteCanvas } from '../../src';\nimport type { SceneState, InfiniteCanvasRef } from '../../src/types';\nimport { INITIAL_STATE } from '../../src/constants';\n\nexport interface TestCanvasProps {\n  initialScene?: SceneState;\n  width?: number;\n  height?: number;\n  onSceneChange?: (scene: SceneState) => void;\n  onSelectionChange?: (ids: string[]) => void;\n  showToolbar?: boolean;\n  showZoomControls?: boolean;\n  snapToGrid?: boolean;\n}\n\nexport function TestCanvas({\n  initialScene = INITIAL_STATE,\n  width = 800,\n  height = 600,\n  onSceneChange,\n  onSelectionChange,\n  showToolbar = true,\n  showZoomControls = true,\n  snapToGrid = false,\n}: TestCanvasProps) {\n  const canvasRef = useRef<InfiniteCanvasRef>(null);\n\n  return (\n    <div\n      data-testid=\"test-canvas-wrapper\"\n      style={{\n        width: `${width}px`,\n        height: `${height}px`,\n        border: '1px solid #ccc',\n        position: 'relative',\n      }}\n    >\n      <InfiniteCanvas\n        ref={canvasRef}\n        initialData={initialScene}\n        onChange={onSceneChange}\n        onSelectionChange={onSelectionChange}\n        config={{\n          snapToGrid,\n          grid: true,\n        }}\n        uiConfig={{\n          showToolbar,\n          showZoomControls,\n          showPropertiesPanel: false,\n        }}\n      />\n    </div>\n  );\n}\n"],"names":["jsxRuntimeModule","require$$0","useMemo","Component","jsxs","jsx","useState","useRef","useEffect","useCallback","Fragment","ConnectionRenderer","ElementRenderer","ResizeHandles","forwardRef","useImperativeHandle","GridLayer"],"mappings":"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","x_google_ignoreList":[0,1]}